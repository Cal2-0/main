<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Ultimate Challenge</title>
    <style>
        body {
            background-color: #0d0d0d;
            color: #e6e6e6;
            font-family: 'Courier New', Courier, monospace;
            padding: 60px;
            line-height: 1.6;
            text-align: center;
        }
        .container {
            max-width: 800px;
            margin: auto;
        }
        h1 {
            text-align: center;
            font-size: 40px;
            color: #ffffff;
        }
        p, div, .footer {
            font-size: 1.35em;
            text-align: center;
        }
        .footer {
            margin-top: 60px;
            font-style: italic;
            text-align: center;
        }
        input, button {
            font-size: 1.2em;
            padding: 18px 24px;
            border-radius: 8px;
            border: 1px solid #444;
            background: #181818;
            color: #e6e6e6;
            margin: 10px 0;
            width: 80%;
            max-width: 400px;
            box-sizing: border-box;
        }
        input:focus, button:focus {
            outline: 2px solid #888;
        }
        button {
            background: #222;
            cursor: pointer;
            transition: background 0.2s;
        }
        button:hover {
            background: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ THE ULTIMATE CHALLENGE</h1>

        <div class="challenge-box">
            <h2>Final Mission</h2>
            <p>
                Throughout your journey, you've encountered fragments hidden in the shadows.<br>
                Each stage contains a piece of the ultimate puzzle, encoded in Morse code.
            </p>

            <div class="hint">
                <strong>üîç Your Mission:</strong><br>
                1. Return to each stage and inspect the page source<br>
                2. Find the "FINALE PART" comments in each file<br>
                3. Collect all Morse code fragments<br>
                4. Decode the complete message<br>
                5. Enter the final answer below
            </div>

            <div class="morse-display" id="morseDisplay">
                Enter your collected Morse code here...
            </div>

            <div class="input-section">
                <input type="text" id="finalAnswer" placeholder="Enter the decoded final answer" />
                <button onclick="checkFinalAnswer()">SUBMIT ANSWER</button>
            </div>

            <div id="feedback" class="feedback"></div>
        </div>
    </div>

    <script>
        const correctAnswer = "victory at last";
        let attempts = 0;
        const maxAttempts = 5;

        function checkFinalAnswer() {
            const userAnswer = document.getElementById('finalAnswer').value.toLowerCase().trim();
            const feedbackDiv = document.getElementById('feedback');
            attempts++;

            if (userAnswer === correctAnswer) {
                // Redirect to finale.html after a short delay
                feedbackDiv.innerHTML = `<div class='feedback success'>Correct! Proceeding to the final message...</div>`;
                setTimeout(() => {
                    window.location.href = 'finale.html';
                }, 1500);
                document.getElementById('finalAnswer').disabled = true;
                document.querySelector('button').disabled = true;
            } else {
                const remaining = maxAttempts - attempts;
                if (remaining > 0) {
                    feedbackDiv.textContent = `Incorrect. ${remaining} attempts remaining. Check your Morse code decoding.`;
                } else {
                    feedbackDiv.textContent = `Too many attempts. The answer is: \"${correctAnswer.toUpperCase()}\". Better luck next time!`;
                }
                feedbackDiv.className = 'feedback error';
            }
        }

        // Allow Enter key to submit
        document.getElementById('finalAnswer').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkFinalAnswer();
            }
        });

        // Morse code display functionality
        document.getElementById('morseDisplay').addEventListener('click', function() {
            const morse = prompt('Enter your collected Morse code fragments:');
            if (morse) {
                this.textContent = morse;
                this.style.color = '#ffff00';
            }
        });
    </script>
</body>
</html> 